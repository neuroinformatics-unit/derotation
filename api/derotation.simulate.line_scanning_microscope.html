
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>derotation.simulate.line_scanning_microscope &#8212; Derotation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=8f2a1f02" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css?v=8d03875c" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=fd825880"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'api/derotation.simulate.line_scanning_microscope';</script>
    <link rel="canonical" href="https://derotation.neuroinformatics.dev/api/derotation.simulate.line_scanning_microscope.html" />
    <link rel="icon" href="../_static/light-logo-niu.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="derotation.simulate.synthetic_data" href="derotation.simulate.synthetic_data.html" />
    <link rel="prev" title="derotation.sample_data" href="derotation.sample_data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
  
    <p class="title logo__title">derotation v0.1.4</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../api_index.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/derotation" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://neuroinformatics.zulipchat.com/#narrow/channel/495735-Derotation" title="Zulip (chat)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Zulip (chat)</span></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../user_guide/index.html">
    User Guide
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../examples/index.html">
    Examples
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../contributing.html">
    Contributing Guide
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../api_index.html">
    API Reference
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/neuroinformatics-unit/derotation" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://neuroinformatics.zulipchat.com/#narrow/channel/495735-Derotation" title="Zulip (chat)" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-solid fa-comments fa-lg" aria-hidden="true"></i>
            <span class="sr-only">Zulip (chat)</span></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="derotation.analysis.bayesian_optimization.html">derotation.analysis.bayesian_optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.analysis.blob_detection.html">derotation.analysis.blob_detection</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.analysis.fit_ellipse.html">derotation.analysis.fit_ellipse</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.analysis.full_derotation_pipeline.html">derotation.analysis.full_derotation_pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.analysis.incremental_derotation_pipeline.html">derotation.analysis.incremental_derotation_pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.analysis.mean_images.html">derotation.analysis.mean_images</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.analysis.metrics.html">derotation.analysis.metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.config.load_config.html">derotation.config.load_config</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.derotate_batch.html">derotation.derotate_batch</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.derotate_by_line.html">derotation.derotate_by_line</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.load_data.custom_data_loaders.html">derotation.load_data.custom_data_loaders</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.plotting_hooks.for_derotation.html">derotation.plotting_hooks.for_derotation</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.sample_data.html">derotation.sample_data</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">derotation.simulate.line_scanning_microscope</a></li>
<li class="toctree-l1"><a class="reference internal" href="derotation.simulate.synthetic_data.html">derotation.simulate.synthetic_data</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../api_index.html" class="nav-link">API Reference</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">derotation.simulate.line_scanning_microscope</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="module-derotation.simulate.line_scanning_microscope">
<span id="derotation-simulate-line-scanning-microscope"></span><h1>derotation.simulate.line_scanning_microscope<a class="headerlink" href="#module-derotation.simulate.line_scanning_microscope" title="Link to this heading">#</a></h1>
<p>This module contains the <code class="docutils literal notranslate"><span class="pre">Rotator</span></code> class, which is used to simulate the
acquisition of a rotated image stack as if for each line acquired, the sample
was rotated at a given angle in a given center and plane of rotation.</p>
<p class="rubric">Classes</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#derotation.simulate.line_scanning_microscope.Rotator" title="derotation.simulate.line_scanning_microscope.Rotator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Rotator</span></code></a>(angles, image_stack[, ...])</p></td>
<td><p>The <code class="docutils literal notranslate"><span class="pre">Rotator</span></code> aims to imitate the scanning pattern of a multi-photon microscope while the speciment is rotating.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py class">
<dt class="sig sig-object py" id="derotation.simulate.line_scanning_microscope.Rotator">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">derotation.simulate.line_scanning_microscope.</span></span><span class="sig-name descname"><span class="pre">Rotator</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">angles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">image_stack</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation_plane_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rotation_plane_orientation</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">blank_pixel_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/derotation/simulate/line_scanning_microscope.html#Rotator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#derotation.simulate.line_scanning_microscope.Rotator" title="Link to this definition">#</a></dt>
<dd><p>The <code class="docutils literal notranslate"><span class="pre">Rotator</span></code> aims to imitate the scanning pattern of a multi-photon
microscope while the speciment is rotating. Currently, it approximates
the acquisition of a given line as if it was instantaneous, happening
while the sample was rotated at a given angle.</p>
<p>It is also possible to simulate the acquisition of a movie from a
rotation plane that differs from the scanning plane. To achieve this,
provide the rotation_plane_angle and if you want the orientation as
well.</p>
<p>The purpose of the <code class="docutils literal notranslate"><span class="pre">Rotator</span></code> object is to imitate the acquisition of
rotated samples in order to validate the derotation algorithms and in
the future, build a forward model of the transformation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>angles</strong> (<em>np.ndarray</em>) – An array of angles in degrees, representing the rotation of the
sample at the time of acquisition. The length of the array should
be equal to the number of lines per frame multiplied by the number
of frames.</p></li>
<li><p><strong>image_stack</strong> (<em>np.ndarray</em>) – The image stack represents the acquired images, as if there was no
rotation. The shape of the image stack should be (<code class="docutils literal notranslate"><span class="pre">num_frames</span></code>,
<code class="docutils literal notranslate"><span class="pre">num_lines_per_frame</span></code>, <code class="docutils literal notranslate"><span class="pre">num_pixels_per_line</span></code>). In case you want to
rotate a single frame, provide an (1, <code class="docutils literal notranslate"><span class="pre">num_lines_per_frame</span></code>,
<code class="docutils literal notranslate"><span class="pre">num_pixels_per_line</span></code>) image stack.</p></li>
<li><p><strong>center</strong> (<em>Tuple</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>, </em><em>optional</em>) – The center of rotation. If None, the center is going to be the
center of the image, by default None</p></li>
<li><p><strong>rotation_plane_angle</strong> (<em>float</em><em>, </em><em>optional</em>) – The z angle of the rotation plane in degrees in relation to the
scanning plane. If 0, the rotation plane is the same as
the  scanning plane, by default None.</p></li>
<li><p><strong>rotation_plane_orientation</strong> (<em>float</em><em>, </em><em>optional</em>) – The angle of the rotation plane in the x-y plane in degrees,
transposed into the rotation plane. If 0, the rotation
plane is the same as the scanning plane, by default None.</p></li>
<li><p><strong>blank_pixel_val</strong> (<em>Optional</em><em>[</em><em>float</em><em>]</em><em>, </em><em>optional</em>) – The value to fill the blank pixels with. If None, it is going to be
the minimum value of the image stack, by default None.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>AssertionError</strong><strong> (</strong><strong>1</strong><strong>)</strong> – If the number of angles is not equal to the number of lines
per frame multiplied by the number of frames</p></li>
<li><p><strong>AssertionError</strong><strong> (</strong><strong>2</strong><strong>)</strong> – If rotation_plane_orientation is provided, but <code class="docutils literal notranslate"><span class="pre">rotation_plane_angle</span></code>
is not provided.</p></li>
</ul>
</dd>
</dl>
<p class="rubric">Methods</p>
<div class="pst-scrollable-table-container"><table class="autosummary longtable table autosummary">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#derotation.simulate.line_scanning_microscope.Rotator.calculate_pixel_shift" title="derotation.simulate.line_scanning_microscope.Rotator.calculate_pixel_shift"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calculate_pixel_shift</span></code></a>()</p></td>
<td><p>Calculate the pixel shift and the new image size based on the rotation plane angle.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#derotation.simulate.line_scanning_microscope.Rotator.create_homography_matrices" title="derotation.simulate.line_scanning_microscope.Rotator.create_homography_matrices"><code class="xref py py-obj docutils literal notranslate"><span class="pre">create_homography_matrices</span></code></a>()</p></td>
<td><p>Create the homography matrices to simulate the acquisition of a rotated sample from a different plane than the scanning plane.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#derotation.simulate.line_scanning_microscope.Rotator.get_blank_pixels_value" title="derotation.simulate.line_scanning_microscope.Rotator.get_blank_pixels_value"><code class="xref py py-obj docutils literal notranslate"><span class="pre">get_blank_pixels_value</span></code></a>()</p></td>
<td><p>Get a default value to fill the edges of the rotated image.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#derotation.simulate.line_scanning_microscope.Rotator.homography_rotation_to_scanning_plane" title="derotation.simulate.line_scanning_microscope.Rotator.homography_rotation_to_scanning_plane"><code class="xref py py-obj docutils literal notranslate"><span class="pre">homography_rotation_to_scanning_plane</span></code></a>(image)</p></td>
<td><p>Apply the homography to the image to simulate the acquisition of a rotated sample from a different plane than the scanning plane.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#derotation.simulate.line_scanning_microscope.Rotator.rotate_by_line" title="derotation.simulate.line_scanning_microscope.Rotator.rotate_by_line"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rotate_by_line</span></code></a>()</p></td>
<td><p>Simulate the acquisition of a rotated image stack as if for each line acquired, the sample was rotated at a given angle in a given center and plane of rotation.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#derotation.simulate.line_scanning_microscope.Rotator.rotate_sample" title="derotation.simulate.line_scanning_microscope.Rotator.rotate_sample"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rotate_sample</span></code></a>(image, angle[, center])</p></td>
<td><p>Rotate the entire image by a given angle.</p></td>
</tr>
</tbody>
</table>
</div>
<dl class="py method">
<dt class="sig sig-object py" id="derotation.simulate.line_scanning_microscope.Rotator.create_homography_matrices">
<span class="sig-name descname"><span class="pre">create_homography_matrices</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/derotation/simulate/line_scanning_microscope.html#Rotator.create_homography_matrices"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#derotation.simulate.line_scanning_microscope.Rotator.create_homography_matrices" title="Link to this definition">#</a></dt>
<dd><p>Create the homography matrices to simulate the acquisition of a
rotated sample from a different plane than the scanning plane.</p>
<p>The homography matrix is used to transform the image from the scanning
plane to the rotation plane and vice-versa.</p>
<p>The homography matrix is defined as:
H = [[1, 0, 0], [0, cos(theta), 0], [0, 0, 1]]
where theta is the rotation plane angle in degrees.</p>
<p>Currently, we are using only the inverse homography matrix to transform
the image from the rotation plane to the scanning plane.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="derotation.simulate.line_scanning_microscope.Rotator.calculate_pixel_shift">
<span class="sig-name descname"><span class="pre">calculate_pixel_shift</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/derotation/simulate/line_scanning_microscope.html#Rotator.calculate_pixel_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#derotation.simulate.line_scanning_microscope.Rotator.calculate_pixel_shift" title="Link to this definition">#</a></dt>
<dd><p>Calculate the pixel shift and the new image size based on the rotation
plane angle.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><span class="sphinx_autodoc_typehints-type"><code class="xref py py-obj docutils literal notranslate"><span class="pre">None</span></code></span></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="derotation.simulate.line_scanning_microscope.Rotator.rotate_by_line">
<span class="sig-name descname"><span class="pre">rotate_by_line</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/derotation/simulate/line_scanning_microscope.html#Rotator.rotate_by_line"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#derotation.simulate.line_scanning_microscope.Rotator.rotate_by_line" title="Link to this definition">#</a></dt>
<dd><p>Simulate the acquisition of a rotated image stack as if for each
line acquired, the sample was rotated at a given angle in a given
center and plane of rotation.</p>
<p>Each frame is rotated <code class="docutils literal notranslate"><span class="pre">n_lines_per_frame</span></code> times, where
<code class="docutils literal notranslate"><span class="pre">n_lines_per_frame</span></code> is the number of lines per frame in the image
stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The rotated image stack of the same shape as the input image stack,
i.e. (<code class="docutils literal notranslate"><span class="pre">num_frames</span></code>, <code class="docutils literal notranslate"><span class="pre">num_lines_per_frame</span></code>,
<code class="docutils literal notranslate"><span class="pre">num_pixels_per_line</span></code>).</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="derotation.simulate.line_scanning_microscope.Rotator.homography_rotation_to_scanning_plane">
<span class="sig-name descname"><span class="pre">homography_rotation_to_scanning_plane</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/derotation/simulate/line_scanning_microscope.html#Rotator.homography_rotation_to_scanning_plane"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#derotation.simulate.line_scanning_microscope.Rotator.homography_rotation_to_scanning_plane" title="Link to this definition">#</a></dt>
<dd><p>Apply the homography to the image to simulate the acquisition of a
rotated sample from a different plane than the scanning plane.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>image</strong> (<em>np.ndarray</em>) – The image to apply the homography.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The transformed image.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="derotation.simulate.line_scanning_microscope.Rotator.rotate_sample">
<span class="sig-name descname"><span class="pre">rotate_sample</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">angle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/derotation/simulate/line_scanning_microscope.html#Rotator.rotate_sample"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#derotation.simulate.line_scanning_microscope.Rotator.rotate_sample" title="Link to this definition">#</a></dt>
<dd><p>Rotate the entire image by a given angle. Uses affine transformation
with no interpolation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> (<em>np.ndarray</em>) – The image to rotate.</p></li>
<li><p><strong>angle</strong> (<em>float</em>) – The angle in degrees to rotate the image in degrees. If positive,
rotates clockwise. If negative, rotates counterclockwise.</p></li>
<li><p><strong>blank_pixel</strong> (<em>float</em>) – The value to fill the blank pixels with.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The rotated image.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="derotation.simulate.line_scanning_microscope.Rotator.get_blank_pixels_value">
<span class="sig-name descname"><span class="pre">get_blank_pixels_value</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/derotation/simulate/line_scanning_microscope.html#Rotator.get_blank_pixels_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#derotation.simulate.line_scanning_microscope.Rotator.get_blank_pixels_value" title="Link to this definition">#</a></dt>
<dd><p>Get a default value to fill the edges of the rotated image.
This is necessary because we are using affine transformation with no
interpolation, so we need to fill the blank pixels with some value.</p>
<p>As for now, it returns the minimum value of the image stack.</p>
<dl class="field-list simple">
<dt class="field-odd">Returns<span class="colon">:</span></dt>
<dd class="field-odd"><p>The minimum value of the image stack.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>float</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="derotation.sample_data.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">derotation.sample_data</p>
      </div>
    </a>
    <a class="right-next"
       href="derotation.simulate.synthetic_data.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">derotation.simulate.synthetic_data</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#derotation.simulate.line_scanning_microscope.Rotator"><code class="docutils literal notranslate"><span class="pre">Rotator</span></code></a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derotation.simulate.line_scanning_microscope.Rotator.create_homography_matrices"><code class="docutils literal notranslate"><span class="pre">Rotator.create_homography_matrices()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derotation.simulate.line_scanning_microscope.Rotator.calculate_pixel_shift"><code class="docutils literal notranslate"><span class="pre">Rotator.calculate_pixel_shift()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derotation.simulate.line_scanning_microscope.Rotator.rotate_by_line"><code class="docutils literal notranslate"><span class="pre">Rotator.rotate_by_line()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derotation.simulate.line_scanning_microscope.Rotator.homography_rotation_to_scanning_plane"><code class="docutils literal notranslate"><span class="pre">Rotator.homography_rotation_to_scanning_plane()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derotation.simulate.line_scanning_microscope.Rotator.rotate_sample"><code class="docutils literal notranslate"><span class="pre">Rotator.rotate_sample()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#derotation.simulate.line_scanning_microscope.Rotator.get_blank_pixels_value"><code class="docutils literal notranslate"><span class="pre">Rotator.get_blank_pixels_value()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item"><p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
    </p>
    <p class="theme-version">
    Built with the
    <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a>
    0.16.1.
    </p></div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><div class="things-in-a-row">
    <a href="https://neuroinformatics.dev/">
        <img src="../_static/light-logo-niu.png" alt="NIU" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-niu.png" alt="NIU" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.sainsburywellcome.org/web/">
        <img src="../_static/light-logo-swc.png" alt="SWC" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-swc.png" alt="SWC" class="only-dark img-sponsor"/>
    </a>
    <a href="https://www.ucl.ac.uk/">
        <img src="../_static/light-logo-ucl.png" alt="UCL" class="only-light img-sponsor"/>
        <img src="../_static/dark-logo-ucl.png" alt="UCL" class="only-dark img-sponsor"/>
    </a>
</div></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>